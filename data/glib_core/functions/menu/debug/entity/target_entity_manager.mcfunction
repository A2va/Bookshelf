tag @e[distance=0.1..] remove glib.debug.entity.target_entity_manager

execute if entity @a[tag=glib.debug.entity.target_entity_manager] run tellraw @a[tag=glib.debug] [{"text":"> DEBUG | glib:entity/target_entity_manager","color":"green","clickEvent":{"action":"run_command","value":"/tag @e remove glib.debug.entity.target_entity_manager"},"hoverEvent":{"action":"show_text","value":["",{"text":"Remove this debug"}]}}]

tag @e remove glib.debug.entity.entity_manager_selected

scoreboard players operation @e glib.debug.id -= @s glib.id.target
tag @e[scores={glib.debug.id=0},limit=1,sort=nearest] add glib.debug.entity.entity_manager_selected
scoreboard players operation @e glib.debug.id += @s glib.id.target

execute unless entity @e[tag=glib.debug.entity.entity_manager_selected] run tellraw @a[tag=glib.debug] ["",{"text":"   No entity selected","color":"dark_gray"},{"text":" [Select]","color":"dark_aqua","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target"},"hoverEvent":{"action":"show_text","value":"Select an entity by setting your 'glib.id.target' score equal to the score 'glib.debug.id' of your target entity"}}]

tellraw @a[tag=glib.debug] ["",{"text":"   Debug controlled by: ","color":"dark_gray"},{"selector":"@s","color":"gold"}]

# Selected Entity
execute if entity @e[tag=glib.debug.entity.entity_manager_selected] run tellraw @a[tag=glib.debug,tag=glib.debug.entity.target_entity_manager] ["",{"text":"   Selected entity: ","color":"dark_gray"},{"selector":"@e[tag=glib.debug.entity.entity_manager_selected,limit=1,sort=nearest]","color":"gold"},{"text":"   glib.debug.id:","color":"dark_gray","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target"},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}},{"text":" ","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target "},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}},{"score":{"name":"@e[tag=glib.debug.entity.entity_manager_selected,limit=1,sort=nearest]","objective":"glib.debug.id"},"color":"gold","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target "},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}},{"text":"   [Select]","color":"dark_aqua","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target"},"hoverEvent":{"action":"show_text","value":"Select an entity"}}]
execute if entity @e[tag=glib.debug.entity.entity_manager_selected] run tellraw @a[tag=glib.debug,tag=!glib.debug.entity.target_entity_manager] ["",{"text":"   Selected entity: ","color":"dark_gray"},{"selector":"@e[tag=glib.debug.entity.entity_manager_selected,limit=1,sort=nearest]","color":"gold"},{"text":"   glib.debug.id:","color":"dark_gray","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target"},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}},{"text":" ","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target "},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}},{"score":{"name":"@e[tag=glib.debug.entity.entity_manager_selected,limit=1,sort=nearest]","objective":"glib.debug.id"},"color":"gold","clickEvent":{"action":"suggest_command","value":"/scoreboard players set @s glib.id.target "},"hoverEvent":{"action":"show_text","value":"Select this entity (enter this glib.debug.id as glib.id.target)"}}]


execute if entity @e[tag=glib.debug.entity.entity_manager_selected,type=!player] run tellraw @a[tag=glib.debug] ["",{"text":"   Actions: ","color":"dark_gray"},{"text":"[Go] ","color":"blue","clickEvent":{"action":"run_command","value":"/execute at @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] run tp @s ~ ~ ~"},"hoverEvent":{"action":"show_text","value":"Go to target"}},{"text":"[Grab] ","color":"green","clickEvent":{"action":"run_command","value":"/tp @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] ~ ~ ~"},"hoverEvent":{"action":"show_text","value":"Bring back target"}},{"text":"[Glow] ","color":"gold","clickEvent":{"action":"run_command","value":"/effect give @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] glowing 1 1 true"},"hoverEvent":{"action":"show_text","value":"Hightlight target"}},{"text":"[Reset] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players reset @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected]"},"hoverEvent":{"action":"show_text","value":"Clear all target's scores"}},{"text":"[Kill]","color":"dark_red","clickEvent":{"action":"run_command","value":"/kill @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected]"},"hoverEvent":{"action":"show_text","value":"Kill target"}}]
execute if entity @e[tag=glib.debug.entity.entity_manager_selected,type=player] run tellraw @a[tag=glib.debug] ["",{"text":"   Actions: ","color":"dark_gray"},{"text":"[Go] ","color":"blue","clickEvent":{"action":"run_command","value":"/execute at @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] run tp @s ~ ~ ~"},"hoverEvent":{"action":"show_text","value":"Go to target"}},{"text":"[Grab] ","color":"green","clickEvent":{"action":"run_command","value":"/tp @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] ~ ~ ~"},"hoverEvent":{"action":"show_text","value":"Bring back target"}},{"text":"[Glow] ","color":"gold","clickEvent":{"action":"run_command","value":"/effect give @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected] glowing 1 1 true"},"hoverEvent":{"action":"show_text","value":"Hightlight target"}},{"text":"[Clear] ","color":"dark_purple","clickEvent":{"action":"run_command","value":"/clear @a[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected]"},"hoverEvent":{"action":"show_text","value":"Clear all items in it's inventory"}},{"text":"[Reset] ","color":"red","clickEvent":{"action":"run_command","value":"/scoreboard players reset @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected]"},"hoverEvent":{"action":"show_text","value":"Clear all target's scores"}},{"text":"[Kill]","color":"dark_red","clickEvent":{"action":"run_command","value":"/kill @e[limit=1,sort=nearest,tag=glib.debug.entity.entity_manager_selected]"},"hoverEvent":{"action":"show_text","value":"Kill target"}}]

function glib:core/debug/message/info/end_debug
